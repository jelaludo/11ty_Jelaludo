---
pagination:
    data: gallery
    size: 1
    alias: image
permalink: "/gallery/{{ image.title | slug }}/"
url: https://eleventy-gallery.netlify.app
---
{% import "partials/palette.njk" as palette %}
{% import "partials/color-treemap.njk" as treemap %}
<!DOCTYPE html>
<html lang="en-US" dir="ltr">
    <head>
        {% metagen 
            title=image.title,
            desc=image.title + " " + site.pageMetadata.featured.content,
            url=url + "/gallery/" + image.title | slug + "/",
            img=url + image.imgDir + image.src,
            img_alt=image.alt,
            twitter_card_type='summary_large_image',
            twitter_handle=site.author.twitterHandle,
            name=site.author.firstName + " " + site.author.lastName,
            generator="Eleventy v2.0.1",
            comments=true
        %}
        <link rel="apple-touch-icon" sizes="180x180" href="/favicon_data/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon_data/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon_data/favicon-16x16.png">
        <link rel="manifest" href="/favicon_data/site.webmanifest">
        {% set css %}
            {% include "css/style.css" %}
            {% include "css/reset.css" %}
        {% endset %}
        <style>
            {{ css | cssmin | safe }}
        </style>
    </head>
    <body>
        <a href="#main" class="skip-link">Skip to main content</a>
        {% include "partials/nav.njk" %}
        <main id="main" class="feature-frame">
            <div class="feature-frame__media">
                {% img
                    src=image.src,
                    alt=image.alt,
                    className="feature-frame__img",
                    sizes="100vw"
                %}
            </div>
            <section class="feature-frame__overlay">
                <header class="feature-frame__meta">
                    <h1>{{ image.title }}</h1>
                    {% if image.credit %}
                    <p>{{ image.credit }}</p>
                    {% endif %}
                    {% if image.linkToAuthor %}
                    <a class="feature-frame__source" href="{{ image.linkToAuthor }}" target="_blank" rel="noopener">View Original</a>
                    {% endif %}
                </header>
                {% set treemapData = colorTreemap[image.src] %}
                {% if not treemapData %}
                {{ palette.render(image.palette, "feature-frame__palette") }}
                {% endif %}
                {{ treemap.render(treemapData, "feature-frame__treemap") }}
                {% set exifData = exif[image.src] %}
                {% if exifData %}
                <section class="feature-frame__exif" aria-label="Photo metadata">
                    <ul class="feature-frame__exif-list">
                        {% if exifData.model %}
                        <li>{{ exifData.model }}</li>
                        {% endif %}
                        {% if exifData.lens %}
                        <li>{{ exifData.lens }}</li>
                        {% endif %}
                        {% if exifData.focalLength %}
                        <li>{{ exifData.focalLength }}</li>
                        {% endif %}
                        {% if exifData.exposure %}
                        <li>{{ exifData.exposure }}</li>
                        {% endif %}
                        {% if exifData.imageSize %}
                        <li>{{ exifData.imageSize }}</li>
                        {% endif %}
                        {% if exifData.resolution %}
                        <li>{{ exifData.resolution }}</li>
                        {% endif %}
                        {% if exifData.flash %}
                        <li>{{ exifData.flash }}</li>
                        {% endif %}
                    </ul>
                </section>
                {% endif %}
                <nav class="feature-frame__nav" aria-label="Gallery navigation">
                    {% if pagination.href.previous %}
                    <a class="feature-frame__navlink" href="{{ pagination.href.previous }}">
                        <span class="feature-frame__label">Previous</span>
                    </a>
                    {% endif %}
                    {% if pagination.href.next %}
                    <a class="feature-frame__navlink" href="{{ pagination.href.next }}">
                        <span class="feature-frame__label">Next</span>
                    </a>
                    {% endif %}
                </nav>
            </section>
        </main>
        {% include "partials/footer.njk" %}
        <script type="module" src="/js/orientation.js"></script>
        <script src="/js/feature-navigation.js"></script>
    </body>
</html>